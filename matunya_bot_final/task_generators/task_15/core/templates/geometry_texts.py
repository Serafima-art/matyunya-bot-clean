"""
–¢–µ–∫—Å—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç

–°–∫–ª–∞–¥ –∫—Ä–µ–∞—Ç–∏–≤–∞ - –æ—Ñ–ª–∞–π–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
"""

# –°–∫–ª–∞–¥ –∫—Ä–µ–∞—Ç–∏–≤–∞ - –≥–æ—Ç–æ–≤—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á
geometry_templates = {
    'trigonometry': {
        'find_cos': [
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC –∏–∑–≤–µ—Å—Ç–µ–Ω —É–≥–æ–ª A = {angle}¬∞. –ù–∞–π–¥–∏—Ç–µ cos A.",
            "–í –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC —É–≥–æ–ª –ø—Ä–∏ –≤–µ—Ä—à–∏–Ω–µ A —Ä–∞–≤–µ–Ω {angle}¬∞. –í—ã—á–∏—Å–ª–∏—Ç–µ cos A.",
            "–î–∞–Ω —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ABC —Å —É–≥–ª–æ–º A = {angle}¬∞. –ù–∞–π–¥–∏—Ç–µ –∫–æ—Å–∏–Ω—É—Å —É–≥–ª–∞ A."
        ],
        'find_sin': [
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC –∏–∑–≤–µ—Å—Ç–µ–Ω —É–≥–æ–ª A = {angle}¬∞. –ù–∞–π–¥–∏—Ç–µ sin A.",
            "–í –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC —É–≥–æ–ª –ø—Ä–∏ –≤–µ—Ä—à–∏–Ω–µ A —Ä–∞–≤–µ–Ω {angle}¬∞. –í—ã—á–∏—Å–ª–∏—Ç–µ sin A.",
            "–î–∞–Ω —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ABC —Å —É–≥–ª–æ–º A = {angle}¬∞. –ù–∞–π–¥–∏—Ç–µ —Å–∏–Ω—É—Å —É–≥–ª–∞ A."
        ],
        'find_tg': [
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC –∏–∑–≤–µ—Å—Ç–µ–Ω —É–≥–æ–ª A = {angle}¬∞. –ù–∞–π–¥–∏—Ç–µ tg A.",
            "–í –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC —É–≥–æ–ª –ø—Ä–∏ –≤–µ—Ä—à–∏–Ω–µ A —Ä–∞–≤–µ–Ω {angle}¬∞. –í—ã—á–∏—Å–ª–∏—Ç–µ tg A.",
            "–î–∞–Ω —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ABC —Å —É–≥–ª–æ–º A = {angle}¬∞. –ù–∞–π–¥–∏—Ç–µ —Ç–∞–Ω–≥–µ–Ω—Å —É–≥–ª–∞ A."
        ],
        'find_side': [
            "–í –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC —É–≥–æ–ª A = {angle}¬∞, –∫–∞—Ç–µ—Ç {side_name} = {side_length}. –ù–∞–π–¥–∏—Ç–µ –≥–∏–ø–æ—Ç–µ–Ω—É–∑—É.",
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC —É–≥–æ–ª A = {angle}¬∞, —Å—Ç–æ—Ä–æ–Ω–∞ {side_name} = {side_length}. –ù–∞–π–¥–∏—Ç–µ –¥–ª–∏–Ω—É —Å—Ç–æ—Ä–æ–Ω—ã BC.",
            "–î–∞–Ω —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ABC —Å —É–≥–ª–æ–º A = {angle}¬∞ –∏ —Å—Ç–æ—Ä–æ–Ω–æ–π {side_name} = {side_length}. –í—ã—á–∏—Å–ª–∏—Ç–µ –¥–ª–∏–Ω—É –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã."
        ],
        'find_angle': [
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC {function}(A) = {value}. –ù–∞–π–¥–∏—Ç–µ —É–≥–æ–ª A.",
            "–í –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ {function}(A) = {value}. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≤–µ–ª–∏—á–∏–Ω—É —É–≥–ª–∞ A.",
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC –∑–Ω–∞—á–µ–Ω–∏–µ {function}(A) = {value}. –ù–∞–π–¥–∏—Ç–µ —É–≥–æ–ª A."
        ]
    },
    'angles': {
        'bisector_angle': [
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞ –∏–∑ –≤–µ—Ä—à–∏–Ω—ã A. –ù–∞–π–¥–∏—Ç–µ —É–≥–æ–ª –º–µ–∂–¥—É –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–æ–π –∏ —Å—Ç–æ—Ä–æ–Ω–æ–π AB.",
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞ —É–≥–ª–∞ A –æ–±—Ä–∞–∑—É–µ—Ç —Å–æ —Å—Ç–æ—Ä–æ–Ω–æ–π AC —É–≥–æ–ª {angle}¬∞. –ù–∞–π–¥–∏—Ç–µ —É–≥–æ–ª A.",
            "–î–∞–Ω —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ABC —Å —É–≥–ª–æ–º A = {total_angle}¬∞. –ë–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞ —É–≥–ª–∞ A –¥–µ–ª–∏—Ç –µ–≥–æ –Ω–∞ –¥–≤–∞ —É–≥–ª–∞. –ù–∞–π–¥–∏—Ç–µ –∏—Ö –≤–µ–ª–∏—á–∏–Ω—É."
        ],
        'external_angle': [
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC –≤–Ω–µ—à–Ω–∏–π —É–≥–æ–ª –ø—Ä–∏ –≤–µ—Ä—à–∏–Ω–µ A —Ä–∞–≤–µ–Ω {external_angle}¬∞. –ù–∞–π–¥–∏—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É–≥–æ–ª A.",
            "–í–Ω–µ—à–Ω–∏–π —É–≥–æ–ª —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ –ø—Ä–∏ –≤–µ—Ä—à–∏–Ω–µ A —Ä–∞–≤–µ–Ω {external_angle}¬∞. –ù–∞–π–¥–∏—Ç–µ —É–≥–æ–ª –º–µ–∂–¥—É —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ AB –∏ AC.",
            "–î–∞–Ω –≤–Ω–µ—à–Ω–∏–π —É–≥–æ–ª {external_angle}¬∞ –ø—Ä–∏ –≤–µ—Ä—à–∏–Ω–µ A —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ ABC. –ù–∞–π–¥–∏—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —É–≥–æ–ª A."
        ],
        'sum_angles': [
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC —É–≥–æ–ª A = {angle_a}¬∞, —É–≥–æ–ª B = {angle_b}¬∞. –ù–∞–π–¥–∏—Ç–µ —É–≥–æ–ª C.",
            "–°—É–º–º–∞ –¥–≤—É—Ö —É–≥–ª–æ–≤ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Ä–∞–≤–Ω–∞ {sum_angles}¬∞. –ù–∞–π–¥–∏—Ç–µ —Ç—Ä–µ—Ç–∏–π —É–≥–æ–ª, –µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –æ–¥–∏–Ω –∏–∑ —É–≥–ª–æ–≤ —Ä–∞–≤–µ–Ω {known_angle}¬∞.",
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ –∏–∑–≤–µ—Å—Ç–Ω—ã —É–≥–ª—ã A = {angle_a}¬∞ –∏ B = {angle_b}¬∞. –ù–∞–π–¥–∏—Ç–µ –≤–µ–ª–∏—á–∏–Ω—É —É–≥–ª–∞ C."
        ]
    },
    'areas': {
        'triangle_area': [
            "–ù–∞–π–¥–∏—Ç–µ –ø–ª–æ—â–∞–¥—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ ABC —Å–æ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏ a = {a}, b = {b}, c = {c}.",
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC —Å—Ç–æ—Ä–æ–Ω–∞ AB = {ab}, –≤—ã—Å–æ—Ç–∞, –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–∞—è –∫ —ç—Ç–æ–π —Å—Ç–æ—Ä–æ–Ω–µ, —Ä–∞–≤–Ω–∞ {height}. –ù–∞–π–¥–∏—Ç–µ –ø–ª–æ—â–∞–¥—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞.",
            "–î–∞–Ω —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ABC —Å –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º AB = {base} –∏ –≤—ã—Å–æ—Ç–æ–π h = {height}. –í—ã—á–∏—Å–ª–∏—Ç–µ –ø–ª–æ—â–∞–¥—å."
        ],
        'area_ratio': [
            "–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å—Ç–æ—Ä–æ–Ω–µ BC —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ ABC –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –ø—Ä—è–º–∞—è, –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω—ã AB –∏ AC –≤ —Ç–æ—á–∫–∞—Ö M –∏ N. –ù–∞–π–¥–∏—Ç–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–µ–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ AMN –∏ ABC.",
            "–í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É M –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ AB –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –ø—Ä—è–º–∞—è, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è BC, –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∞—è AC –≤ —Ç–æ—á–∫–µ N. –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ AM:MB = {ratio}. –ù–∞–π–¥–∏—Ç–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–µ–π.",
            "–ü—Ä—è–º–∞—è, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ—Å–Ω–æ–≤–∞–Ω–∏—é —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞, –¥–µ–ª–∏—Ç –µ–≥–æ –Ω–∞ –¥–≤–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞. –ù–∞–π–¥–∏—Ç–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∏—Ö –ø–ª–æ—â–∞–¥–µ–π, –µ—Å–ª–∏ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –æ–Ω–∞ –¥–µ–ª–∏—Ç –≤—ã—Å–æ—Ç—É –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ {height_ratio}."
        ]
    },
    'similarity': {
        'similarity_ratio': [
            "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ ABC –∏ A1B1C1 –ø–æ–¥–æ–±–Ω—ã. –°—Ç–æ—Ä–æ–Ω—ã —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ ABC —Ä–∞–≤–Ω—ã a = {a}, b = {b}, c = {c}. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–æ—Ä–æ–Ω—ã —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ A1B1C1 —Ä–∞–≤–Ω—ã a1 = {a1}, b1 = {b1}, c1 = {c1}. –ù–∞–π–¥–∏—Ç–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–¥–æ–±–∏—è.",
            "–î–∞–Ω—ã –¥–≤–∞ –ø–æ–¥–æ–±–Ω—ã—Ö —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞. –°—Ç–æ—Ä–æ–Ω–∞ –ø–µ—Ä–≤–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Ä–∞–≤–Ω–∞ {side1}, –∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –≤—Ç–æ—Ä–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Ä–∞–≤–Ω–∞ {side2}. –ù–∞–π–¥–∏—Ç–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–¥–æ–±–∏—è.",
            "–í –ø–æ–¥–æ–±–Ω—ã—Ö —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞—Ö ABC –∏ A1B1C1 –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–µ–π —Ä–∞–≤–Ω–æ {area_ratio}. –ù–∞–π–¥–∏—Ç–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–¥–æ–±–∏—è."
        ],
        'corresponding_sides': [
            "–í –ø–æ–¥–æ–±–Ω—ã—Ö —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞—Ö ABC –∏ DEF —Å—Ç–æ—Ä–æ–Ω–∞ AB = {ab} —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–æ—Ä–æ–Ω–µ DE = {de}. –°—Ç–æ—Ä–æ–Ω–∞ BC = {bc}. –ù–∞–π–¥–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—Ç–æ—Ä–æ–Ω—É EF.",
            "–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ KMN –∏ K1M1N1 –ø–æ–¥–æ–±–Ω—ã. –ò–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ KM = {km}, MN = {mn}, KN = {kn}. –í —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ K1M1N1 —Å—Ç–æ—Ä–æ–Ω–∞ K1M1 = {k1m1}. –ù–∞–π–¥–∏—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã.",
            "–í –ø–æ–¥–æ–±–Ω—ã—Ö —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞—Ö PQR –∏ P1Q1R1 –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ PQ:P1Q1 = {ratio1} –∏ QR:Q1R1 = {ratio2}. –ù–∞–π–¥–∏—Ç–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ PR:P1R1."
        ]
    },
    'equilateral': {
        'side_from_area': [
            "–ü–ª–æ—â–∞–¥—å —Ä–∞–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Ä–∞–≤–Ω–∞ {area}. –ù–∞–π–¥–∏—Ç–µ –¥–ª–∏–Ω—É –µ–≥–æ —Å—Ç–æ—Ä–æ–Ω—ã.",
            "–í —Ä–∞–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ –ø–ª–æ—â–∞–¥—å S = {area}. –í—ã—á–∏—Å–ª–∏—Ç–µ –ø–µ—Ä–∏–º–µ—Ç—Ä —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞.",
            "–ü–ª–æ—â–∞–¥—å —Ä–∞–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç {area}. –ù–∞–π–¥–∏—Ç–µ –≤—ã—Å–æ—Ç—É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞."
        ],
        'area_from_side': [
            "–°—Ç–æ—Ä–æ–Ω–∞ —Ä–∞–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ —Ä–∞–≤–Ω–∞ {side}. –ù–∞–π–¥–∏—Ç–µ –ø–ª–æ—â–∞–¥—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞.",
            "–í —Ä–∞–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ —Å—Ç–æ—Ä–æ–Ω–∞ a = {side}. –í—ã—á–∏—Å–ª–∏—Ç–µ –ø–ª–æ—â–∞–¥—å.",
            "–î–∞–Ω —Ä–∞–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ —Å–æ —Å—Ç–æ—Ä–æ–Ω–æ–π {side}. –ù–∞–π–¥–∏—Ç–µ –µ–≥–æ –ø–ª–æ—â–∞–¥—å."
        ],
        'angles_equilateral': [
            "–í —Ä–∞–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞. –ù–∞–π–¥–∏—Ç–µ —É–≥–ª—ã –æ–±—Ä–∞–∑–æ–≤–∞–≤—à–∏—Ö—Å—è —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤.",
            "–†–∞–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –¥–≤–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–æ–π –æ–¥–Ω–æ–≥–æ –∏–∑ —É–≥–ª–æ–≤. –ù–∞–π–¥–∏—Ç–µ —É–≥–ª—ã –ø–æ–ª—É—á–∏–≤—à–∏—Ö—Å—è —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤.",
            "–í —Ä–∞–≤–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ ABC –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –±–∏—Å—Å–µ–∫—Ç—Ä–∏—Å–∞ —É–≥–ª–∞ A, –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∞—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É –≤ —Ç–æ—á–∫–µ D. –ù–∞–π–¥–∏—Ç–µ —É–≥–ª—ã —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ ABD –∏ ACD."
        ]
    }
}

# –§–æ—Ä–º—É–ª—ã –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á
solution_formulas = {
    'trigonometry': {
        'cos': {
            'standard_values': {
                30: '‚àö3/2',
                45: '‚àö2/2', 
                60: '1/2'
            },
            'formulas': [
                'cos A = –ø—Ä–∏–ª–µ–∂–∞—â–∏–π –∫–∞—Ç–µ—Ç / –≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞',
                'cos¬≤A + sin¬≤A = 1',
                'tg A = sin A / cos A'
            ]
        },
        'sin': {
            'standard_values': {
                30: '1/2',
                45: '‚àö2/2',
                60: '‚àö3/2'
            },
            'formulas': [
                'sin A = –ø—Ä–æ—Ç–∏–≤–æ–ª–µ–∂–∞—â–∏–π –∫–∞—Ç–µ—Ç / –≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞',
                'cos¬≤A + sin¬≤A = 1',
                'sin(90¬∞ - A) = cos A'
            ]
        },
        'tg': {
            'standard_values': {
                30: '1/‚àö3',
                45: '1',
                60: '‚àö3'
            },
            'formulas': [
                'tg A = sin A / cos A',
                'tg A = –ø—Ä–æ—Ç–∏–≤–æ–ª–µ–∂–∞—â–∏–π –∫–∞—Ç–µ—Ç / –ø—Ä–∏–ª–µ–∂–∞—â–∏–π –∫–∞—Ç–µ—Ç',
                '1 + tg¬≤A = 1 / cos¬≤A'
            ]
        }
    },
    'areas': {
        'triangle_area': [
            'S = ¬Ω √ó a √ó h (—á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∏ –≤—ã—Å–æ—Ç—É)',
            'S = ¬Ω √ó a √ó b √ó sin C (—á–µ—Ä–µ–∑ –¥–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã –∏ —É–≥–æ–ª)',
            'S = ‚àö(p(p-a)(p-b)(p-c)) (—Ñ–æ—Ä–º—É–ª–∞ –ì–µ—Ä–æ–Ω–∞)',
            'S = abc / (4R) (—á–µ—Ä–µ–∑ —Ä–∞–¥–∏—É—Å –æ–ø–∏—Å–∞–Ω–Ω–æ–π –æ–∫—Ä—É–∂–Ω–æ—Å—Ç–∏)'
        ],
        'area_ratio': [
            '–û—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–µ–π –ø–æ–¥–æ–±–Ω—ã—Ö —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ —Ä–∞–≤–Ω–æ –∫–≤–∞–¥—Ä–∞—Ç—É –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –ø–æ–¥–æ–±–∏—è',
            '–ï—Å–ª–∏ –ø—Ä—è–º–∞—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏—é —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞, —Ç–æ –æ–Ω–∞ –æ—Ç—Å–µ–∫–∞–µ—Ç –æ—Ç –Ω–µ–≥–æ –ø–æ–¥–æ–±–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫',
            '–û—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–µ–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ —Å –æ–±—â–µ–π –≤—ã—Å–æ—Ç–æ–π —Ä–∞–≤–Ω–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∏—Ö –æ—Å–Ω–æ–≤–∞–Ω–∏–π'
        ]
    }
}

# –¢–µ–∫—Å—Ç–æ–≤—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –¥–ª—è —É—á–µ–Ω–∏–∫–æ–≤
educational_texts = {
    'trigonometry': {
        'cos_intro': """
üßÆ **–ö–æ—Å–∏–Ω—É—Å —É–≥–ª–∞ –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ**

–ö–æ—Å–∏–Ω—É—Å –æ—Å—Ç—Ä–æ–≥–æ —É–≥–ª–∞ –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ —Ä–∞–≤–µ–Ω –æ—Ç–Ω–æ—à–µ–Ω–∏—é 
–ø—Ä–∏–ª–µ–∂–∞—â–µ–≥–æ –∫–∞—Ç–µ—Ç–∞ –∫ –≥–∏–ø–æ—Ç–µ–Ω—É–∑–µ.

cos A = –ø—Ä–∏–ª–µ–∂–∞—â–∏–π –∫–∞—Ç–µ—Ç / –≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞

üìê **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
‚Ä¢ cos 30¬∞ = ‚àö3/2 ‚âà 0.866
‚Ä¢ cos 45¬∞ = ‚àö2/2 ‚âà 0.707  
‚Ä¢ cos 60¬∞ = 1/2 = 0.5

üí° **–°–æ–≤–µ—Ç:** –ó–∞–ø–æ–º–Ω–∏—Ç–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è - –æ–Ω–∏ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ –∑–∞–¥–∞—á–∞—Ö –û–ì–≠!
        """,
        'sin_intro': """
üìê **–°–∏–Ω—É—Å —É–≥–ª–∞ –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ**

–°–∏–Ω—É—Å –æ—Å—Ç—Ä–æ–≥–æ —É–≥–ª–∞ –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ —Ä–∞–≤–µ–Ω –æ—Ç–Ω–æ—à–µ–Ω–∏—é 
–ø—Ä–æ—Ç–∏–≤–æ–ª–µ–∂–∞—â–µ–≥–æ –∫–∞—Ç–µ—Ç–∞ –∫ –≥–∏–ø–æ—Ç–µ–Ω—É–∑–µ.

sin A = –ø—Ä–æ—Ç–∏–≤–æ–ª–µ–∂–∞—â–∏–π –∫–∞—Ç–µ—Ç / –≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞

üìä **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
‚Ä¢ sin 30¬∞ = 1/2 = 0.5
‚Ä¢ sin 45¬∞ = ‚àö2/2 ‚âà 0.707
‚Ä¢ sin 60¬∞ = ‚àö3/2 ‚âà 0.866

üéØ **–°–≤—è–∑—å sin –∏ cos:** sin(90¬∞ - A) = cos A
        """,
        'tg_intro': """
üìà **–¢–∞–Ω–≥–µ–Ω—Å —É–≥–ª–∞ –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ**

–¢–∞–Ω–≥–µ–Ω—Å –æ—Å—Ç—Ä–æ–≥–æ —É–≥–ª–∞ –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–µ —Ä–∞–≤–µ–Ω –æ—Ç–Ω–æ—à–µ–Ω–∏—é 
–ø—Ä–æ—Ç–∏–≤–æ–ª–µ–∂–∞—â–µ–≥–æ –∫–∞—Ç–µ—Ç–∞ –∫ –ø—Ä–∏–ª–µ–∂–∞—â–µ–º—É –∫–∞—Ç–µ—Ç—É.

tg A = sin A / cos A = –ø—Ä–æ—Ç–∏–≤–æ–ª–µ–∂–∞—â–∏–π –∫–∞—Ç–µ—Ç / –ø—Ä–∏–ª–µ–∂–∞—â–∏–π –∫–∞—Ç–µ—Ç

üìã **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
‚Ä¢ tg 30¬∞ = 1/‚àö3 ‚âà 0.577
‚Ä¢ tg 45¬∞ = 1
‚Ä¢ tg 60¬∞ = ‚àö3 ‚âà 1.732

üîó **–û—Å–Ω–æ–≤–Ω–æ–µ —Ç–æ–∂–¥–µ—Å—Ç–≤–æ:** 1 + tg¬≤A = 1 / cos¬≤A
        """
    },
    'common_mistakes': {
        'trigonometry': [
            "‚ùå –ù–µ –ø—É—Ç–∞–π—Ç–µ –ø—Ä–∏–ª–µ–∂–∞—â–∏–π –∏ –ø—Ä–æ—Ç–∏–≤–æ–ª–µ–∂–∞—â–∏–π –∫–∞—Ç–µ—Ç—ã!",
            "‚ùå –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ, —á—Ç–æ sin¬≤A + cos¬≤A = 1",
            "‚ùå –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–π—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ - sin, cos –∏–ª–∏ tg",
            "‚úÖ –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ, —á—Ç–æ —É–≥–æ–ª –æ—Å—Ç—Ä—ã–π (–¥–ª—è –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞)",
            "‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∞ –Ω–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã–µ"
        ],
        'areas': [
            "‚ùå –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –¥–µ–ª–∏—Ç—å –Ω–∞ 2 –≤ —Ñ–æ—Ä–º—É–ª–µ –ø–ª–æ—â–∞–¥–∏ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞!",
            "‚ùå –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ, —á—Ç–æ –≤—ã—Å–æ—Ç—ã –ø—Ä–æ–≤–µ–¥–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ",
            "‚úÖ –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ–æ—Ä–º—É–ª—ã –ì–µ—Ä–æ–Ω–∞ —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–π–¥–∏—Ç–µ –ø–æ–ª—É–ø–µ—Ä–∏–º–µ—Ç—Ä",
            "‚úÖ –í –ø–æ–¥–æ–±–Ω—ã—Ö —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥–µ–π = –∫–≤–∞–¥—Ä–∞—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –ø–æ–¥–æ–±–∏—è"
        ]
    }
}

def get_template(category, task_type, fallback_text="–®–∞–±–ª–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω"):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–∏–ø—É –∑–∞–¥–∞—á–∏"""
    try:
        templates = geometry_templates.get(category, {}).get(task_type, [])
        if templates:
            import random
            return random.choice(templates)
        else:
            return fallback_text
    except Exception:
        return fallback_text

def get_formulas(category, function=None):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
    try:
        if function:
            return solution_formulas.get(category, {}).get(function, {})
        else:
            return solution_formulas.get(category, {})
    except Exception:
        return {}

def get_educational_text(category, text_type):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞"""
    try:
        return educational_texts.get(category, {}).get(text_type, "")
    except Exception:
        return ""