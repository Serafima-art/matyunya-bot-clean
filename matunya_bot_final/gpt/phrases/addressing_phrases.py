import random
from aiogram.fsm.context import FSMContext

# --- –û–°–ù–û–í–ù–û–ô –ü–£–õ (–°–ø–æ–∫–æ–π–Ω—ã–π –∏ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω—ã–π) ---
DEFAULT_NAMES_BASE = [
    "–ß–µ–º–ø–∏–æ–Ω üèÜ", "–ü—Ä–æ—Ñ–∏ üß†", "–ì–µ–Ω–∏–π ‚ú®", "–ú–∞—Å—Ç–µ—Ä —Å–≤–æ–µ–≥–æ –¥–µ–ª–∞ üéì",
    "–≠–∫—Å–ø–µ—Ä—Ç üßê", "–°—Ç—Ä–∞—Ç–µ–≥ ‚ôüÔ∏è", "–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å üöÄ", "–ü–µ—Ä–≤–æ–æ—Ç–∫—Ä—ã–≤–∞—Ç–µ–ª—å üß≠",
    "–ü–æ–±–µ–¥–∏—Ç–µ–ª—å üèÖ", "–ù–∞—à —á–µ–ª–æ–≤–µ–∫ üòé", "–°–≤–µ—Ç–ª–∞—è –≥–æ–ª–æ–≤–∞ üí°", "–ö–æ–ª–ª–µ–≥–∞ ü§ù",
]

# --- –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢–ê–õ–¨–ù–´–ô –ü–£–õ (–°–ª–µ–Ω–≥, –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –æ—Ç–∫–ª—é—á–∏—Ç—å) ---
DEFAULT_NAMES_TRENDY = [
    "–ë—Ä–æ üòâ",
    "–ö—Ä–∞—à –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ üî•", # –ï—â–µ –æ–¥–Ω–æ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ–µ, –Ω–æ –º–æ–¥–Ω–æ–µ :)
]

# --- –û–ë–™–ï–î–ò–ù–ï–ù–ù–´–ô –°–ü–ò–°–û–ö ---
# –ú—ã –º–æ–∂–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å "–æ—Å—Ç—Ä–æ—Ç—É", –º–µ–Ω—è—è —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ
# –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª—è–µ–º —Ç—Ä–µ–Ω–¥–æ–≤—ã–µ —Å–ª–æ–≤–∞, –Ω–æ –≤ –º–µ–Ω—å—à–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ,
# —á—Ç–æ–±—ã –æ–Ω–∏ –≤—ã–ø–∞–¥–∞–ª–∏ —Ä–µ–∂–µ.
DEFAULT_NAMES = DEFAULT_NAMES_BASE * 5 + DEFAULT_NAMES_TRENDY

async def get_student_name(state: FSMContext, force_real_name: bool = False) -> str:
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º—è —É—á–µ–Ω–∏–∫–∞ –∏–∑ FSMContext.
    –ï—Å–ª–∏ –∏–º—è –Ω–µ –∑–∞–¥–∞–Ω–æ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –ò–õ–ò –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É.
    
    Args:
        state: –ö–æ–Ω—Ç–µ–∫—Å—Ç FSM.
        force_real_name: –ï—Å–ª–∏ True, –≤–µ—Ä–Ω–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è –∏–ª–∏ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É,
                         –±–µ–∑ —Å–ª—É—á–∞–π–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π.
    """
    data = await state.get_data()
    name = data.get("student_name")

    if name:
        # –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ
        return name.strip().capitalize()
    
    if force_real_name:
        # –ï—Å–ª–∏ –ø—Ä–æ—Å—è—Ç —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏–º—è, –∞ –µ–≥–æ –Ω–µ—Ç - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ—Ç—É
        return ""

    # –ï—Å–ª–∏ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –∏–º–µ–Ω–∏ –Ω–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∏–∑ –ø—É–ª–∞
    return random.choice(DEFAULT_NAMES)