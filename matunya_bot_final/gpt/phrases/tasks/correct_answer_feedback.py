import random
from typing import Optional

# --- –°–ø–∏—Å–∫–∏ —Ñ—Ä–∞–∑, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ –Ω–∞–ª–∏—á–∏—é —ç–º–æ–¥–∑–∏ –∏ –≥–µ–Ω–¥–µ—Ä—É ---

# –ì–µ–Ω–¥–µ—Ä–Ω–æ-–Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ñ—Ä–∞–∑—ã
NEUTRAL_PHRASES = [
    "–û—Ç–ª–∏—á–Ω–æ! –ï—Å–ª–∏ –≤—Å—ë –ø–æ–Ω—è—Ç–Ω–æ ‚Äî –º–æ–∂–µ—à—å –∑–∞–∫—Ä—ã—Ç—å –ø–æ–º–æ—â—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å.",
    "–°—É–ø–µ—Ä! –ì–æ—Ç–æ–≤ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ? –ó–∞–∫—Ä–æ–π –ø–æ–º–æ—â—å, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —É–≤–∏–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ.",
    "–í–µ—Ä–Ω–æ! –ï—Å–ª–∏ –ø–æ–º–æ—â—å –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–∞ ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä–æ–π –µ—ë –∏ –≤—ã–±–∏—Ä–∞–π –¥–∞–ª—å—à–µ.",
    "–¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å! –ú–æ–∂–µ—à—å –∑–∞–∫—Ä—ã—Ç—å –ø–æ–º–æ—â—å –∏ –¥–≤–∏–≥–∞—Ç—å—Å—è –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∑–∞–¥–∞–Ω–∏—é.",
    "–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ö–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ ‚Äî –∑–∞–∫—Ä–æ–π –ø–æ–º–æ—â—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏–º.",
    "–ò–¥–µ–∞–ª—å–Ω–æ! –•–æ—á–µ—à—å –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ ‚Äî –∑–∞–∫—Ä–æ–π –ø–æ–º–æ—â—å –∏ —Å–º–µ–ª–æ –≤—ã–±–∏—Ä–∞–π —Å–ª–µ–¥—É—é—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ.",
    "–í —Ç–æ—á–∫—É! –ï—Å–ª–∏ —Ä–∞–∑–æ–±—Ä–∞–ª—Å—è ‚Äî –∑–∞–∫—Ä—ã–≤–∞–π –ø–æ–º–æ—â—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Å–≤–æ—ë–º —Ä–∏—Ç–º–µ.",
]

NEUTRAL_PHRASES_EMOJI = [
    "–û—Ç–ª–∏—á–Ω–æ! üöÄ –ï—Å–ª–∏ –≤—Å—ë —è—Å–Ω–æ ‚Äî –∑–∞–∫—Ä—ã–≤–∞–π –ø–æ–º–æ—â—å –∏ –∏–¥—ë–º –¥–∞–ª—å—à–µ.",
    "–°—É–ø–µ—Ä! üí™ –ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å? –ó–∞–∫—Ä–æ–π –ø–æ–º–æ—â—å –∏ –≤—ã–±–∏—Ä–∞–π —Å–ª–µ–¥—É—é—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ.",
    "–í–µ—Ä–Ω–æ! üòâ –†–∞–∑–æ–±—Ä–∞–ª—Å—è ‚Äî –∑–∞–∫—Ä—ã–≤–∞–π –ø–æ–º–æ—â—å –∏ –¥–≤–∏–≥–∞–µ–º—Å—è –¥–∞–ª—å—à–µ.",
    "–¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å! üëá –•–æ—á–µ—à—å –∏–¥—Ç–∏ –¥–∞–ª—å—à–µ ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä–æ–π –ø–æ–º–æ—â—å.",
    "–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üî• –ó–∞–∫—Ä–æ–π –ø–æ–º–æ—â—å, –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –Ω–æ–≤–æ–º—É –∑–∞–¥–∞–Ω–∏—é.",
    "–ò–¥–µ–∞–ª—å–Ω–æ! ‚ú® –í—Å—ë –ø–æ–Ω—è–ª ‚Äî –∑–∞–∫—Ä—ã–≤–∞–π –ø–æ–º–æ—â—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–π –≤ —É–¥–æ–±–Ω–æ–º —Ç–µ–º–ø–µ.",
    "–í —Ç–æ—á–∫—É! üòé –ï—Å–ª–∏ –ø–æ–º–æ—â—å –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–∞ ‚Äî –∑–∞–∫—Ä–æ–π –µ—ë –∏ –≤—ã–±–∏—Ä–∞–π, —á—Ç–æ —Ä–µ—à–∞—Ç—å –¥–∞–ª—å—à–µ.",
    "–ï—Å—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç! ‚úÖ –•–æ—á–µ—à—å –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å ‚Äî –∑–∞–∫—Ä—ã–≤–∞–π –ø–æ–º–æ—â—å –∏ —Å–º–µ–ª–æ –¥–≤–∏–≥–∞–π—Å—è –¥–∞–ª—å—à–µ.",
    "–ë–ª–µ—Å—Ç—è—â–µ! üí° –ó–∞–∫—Ä—ã–≤–∞–π –ø–æ–º–æ—â—å, –µ—Å–ª–∏ –≤—Å—ë –ø–æ–Ω—è—Ç–Ω–æ, –∏ –≤—ã–±–∏—Ä–∞–π —Å–ª–µ–¥—É—é—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ.",
]

# –§—Ä–∞–∑—ã –¥–ª—è –º–∞–ª—å—á–∏–∫–∞
MALE_PHRASES = [
    "{name}, –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!",
    "–ö—Ä–∞—Å–∞–≤–∞, {name}! –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å.",
    "{name}, —Ç—ã –≤ —É–¥–∞—Ä–µ! –ß—Ç–æ –¥–∞–ª—å—à–µ?",
    "–ò–º–µ–Ω–Ω–æ —Ç–∞–∫, {name}! –í–ø–µ—Ä–µ–¥!",
]

# –§—Ä–∞–∑—ã –¥–ª—è –¥–µ–≤–æ—á–∫–∏
FEMALE_PHRASES = [
    "{name}, –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!",
    "–£–º–Ω–∏—Ü–∞, {name}! –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å.",
    "{name}, —Ç—ã –≤ —É–¥–∞—Ä–µ! –ß—Ç–æ –¥–∞–ª—å—à–µ?",
    "–ò–º–µ–Ω–Ω–æ —Ç–∞–∫, {name}! –í–ø–µ—Ä–µ–¥!",
]

def get_random_feedback(name: Optional[str] = None, gender: Optional[str] = None) -> str:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â—É—é —Ñ—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞,
    —É—á–∏—Ç—ã–≤–∞—è –∏–º—è –∏ –ø–æ–ª, –µ—Å–ª–∏ –æ–Ω–∏ –∏–∑–≤–µ—Å—Ç–Ω—ã.
    """

    # –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ –æ–¥–∏–Ω —Å–ø–∏—Å–æ–∫
    all_phrases = NEUTRAL_PHRASES + NEUTRAL_PHRASES_EMOJI

    # –î–æ–±–∞–≤–ª—è–µ–º –≥–µ–Ω–¥–µ—Ä–Ω–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ—Ä–∞–∑—ã, –µ—Å–ª–∏ –µ—Å—Ç—å –∏–º—è
    if name:
        if gender == '–¥–µ–≤–æ—á–∫–∞':
            all_phrases.extend([p.format(name=name) for p in FEMALE_PHRASES])
        elif gender == '–º–∞–ª—å—á–∏–∫':
            all_phrases.extend([p.format(name=name) for p in MALE_PHRASES])
        else:
            all_phrases.extend([
                f"{name}, –æ—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!",
                f"–¢–∞–∫ –¥–µ—Ä–∂–∞—Ç—å, {name}!",
            ])

    phrase = random.choice(all_phrases)

    # --- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ —Ñ–æ—Ä–º—ã "–ì–æ—Ç–æ–≤(-–∞)" ---
    if "–ì–æ—Ç–æ–≤(-–∞)" in phrase:
        if gender == "–º–∞–ª—å—á–∏–∫":
            phrase = phrase.replace("–ì–æ—Ç–æ–≤(-–∞)", "–ì–æ—Ç–æ–≤")
        elif gender == "–¥–µ–≤–æ—á–∫–∞":
            phrase = phrase.replace("–ì–æ—Ç–æ–≤(-–∞)", "–ì–æ—Ç–æ–≤–∞")
        else:
            # –µ—Å–ª–∏ –ø–æ–ª –Ω–µ —É–∫–∞–∑–∞–Ω ‚Üí –≤—ã–±–∏—Ä–∞–µ–º –º—É–∂—Å–∫–æ–π –∫–∞–∫ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π
            phrase = phrase.replace("–ì–æ—Ç–æ–≤(-–∞)", "–ì–æ—Ç–æ–≤")

    return phrase
