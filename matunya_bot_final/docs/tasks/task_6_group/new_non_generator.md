Наглядный рабочий процесс build.py:
Старт.
Найти все .txt файлы в папке definitions.
Взять common_fractions.txt.
Прочитать его построчно -> для каждой строки вызвать validate_common_fraction -> собрать все успешные результаты.
Взять decimal_fractions.txt.
Прочитать его построчно -> для каждой строки вызвать validate_decimal_fraction -> добавить успешные результаты к общему списку.
... (сделать то же самое для mixed_fractions и powers)...
Взять финальный, огромный список всех заданий.
Превратить его в красивый JSON.
Записать всё в data/tasks_6.json.
Финиш.


Наш алгоритм — это конвейер "Умной Фабрики". Мы создаём "детали" по отдельности, а затем один главный скрипт собирает их в готовый продукт. Это позволяет нам работать быстро, надежно и не ломать то, что уже сделано.
Наш утвержденный алгоритм работы:
Шаг 1: "Склад Сырья" (Подготовка definitions)
Что делаем: Мы создаём и наполняем файл с "сырьем" — текстовыми сценариями задач.
Для нас сейчас: Это создание файла matunya_bot_final/non_generators/task_6/definitions/decimal_fractions.txt.
Процесс: Я (Штурман) по твоему заданию генерирую строки в формате паттерн | выражение, опираясь на эталоны ОГЭ.
Шаг 2: "Отдел Контроля Качества" (Создание validator)
Что делаем: Мы пишем "мозг" — валидатор, который проверяет каждую строку "сырья", вычисляет ответ и, самое главное, строит expression_tree.
Для нас сейчас: Мы создадим matunya_bot_final/non_generators/task_6/validators/decimal_fractions_validator.py.
Шаг 3: "Сборочный Цех" (Запуск build.py)
Что делаем: Мы запускаем наш неизменный главный скрипт-сборщик build.py.
Команда: python -m matunya_bot_final.non_generators.task_6.build
Процесс: Он автоматически находит новые файлы (.txt и validator.py), обрабатывает их и добавляет новые задачи в наш итоговый файл data/tasks_6/tasks_6.json.
Шаг 4: "Ресторан" (Создание solver и доработка humanizer)
Что делаем: Мы пишем "рецепт" для Помощи, который генерирует пошаговое решение в формате "ГОСТ-2025" (solution_core).
Для нас сейчас:
Создаем matunya_bot_final/help_core/solvers/task_6/decimal_fractions_solver.py.
Дополняем наш единый matunya_bot_final/help_core/humanizers/template_humanizers/task_6_humanizer.py новыми текстовыми шаблонами для decimal_fractions.
Шаг 5: "Полевые Испытания" (Тестирование в боте)
Что делаем: Мы проверяем всё в реальных условиях.
Процесс: Запускаем бота, вызываем "Помощь" для нового подтипа и убеждаемся, что всё — от expression_tree до финального HTML — работает как часы.
