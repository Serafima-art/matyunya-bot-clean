üåü –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –¢–ó –î–õ–Ø –í–ê–õ–ò–î–ê–¢–û–†–ê integer_expressions

üîπ 1. –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
matunya_bot_final/
    non_generators/
        task_8/
            validators/
                integer_expressions_validator.py

üîπ 2. –û–±—â–∞—è —Ä–æ–ª—å –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

–í–∞–ª–∏–¥–∞—Ç–æ—Ä:

–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É —Å—ã—Ä—å—è

–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç solution_pattern

–ø–∞—Ä—Å–∏—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫–µ

—Å—Ç—Ä–æ–∏—Ç expression_tree

–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å

–≤—ã—á–∏—Å–ª—è–µ—Ç –æ—Ç–≤–µ—Ç

—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç JSON-–æ–±—ä–µ–∫—Ç –¥–ª—è –ë–î

–û–Ω –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ –≤–∏–¥–∞:

–ü–∞—Ç—Ç–µ—Ä–Ω 1.1 ‚Äî alg_power_fraction
((a^3)^5 ¬∑ a^3) / a^20
(a^m ¬∑ (b^n)^r) / (a¬∑b)^s

–ü–∞—Ç—Ç–µ—Ä–Ω 1.2 ‚Äî alg_radical_power
‚àö(100 ¬∑ a^21 / a^19)
‚àö(25 ¬∑ a^2)
‚àö((-a)^6 ¬∑ a^10)

–ü–∞—Ç—Ç–µ—Ä–Ω 1.3 ‚Äî alg_radical_fraction
( ‚àö(25a) ¬∑ ‚àö(4b^3) ) / ‚àö(ab)
‚àö(ab) / (‚àö(9a^2) ¬∑ ‚àö(16b))

üîπ 3. API –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

–í–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü–∏—é:

def validate(raw_line: str) -> Optional[Dict]:
    """
    –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –≤–∏–¥–∞:
    alg_power_fraction | ((a¬≥)‚Åµ ¬∑ a¬≥) / a¬≤‚Å∞ | a=5
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç dict —Å JSON-–æ–±—ä–µ–∫—Ç–æ–º –∏–ª–∏ None (–µ—Å–ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ).
    """

üîπ 4. –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ solution_pattern

–ü–µ—Ä–≤—ã–µ —Å–ª–æ–≤–∞ —Å—Ç—Ä–æ–∫–∏ ‚Üí –≤—Å–µ–≥–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞:

alg_power_fraction |
alg_radical_power |
alg_radical_fraction |


–í–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω:

–ø—Ä–æ—á–∏—Ç–∞—Ç—å solution_pattern

–≤—ã–±—Ä–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π parse_*

–ø–µ—Ä–µ–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–ª—å—à–µ

üîπ 5. –û—Å–Ω–æ–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

–í–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞:

validate()
‚îÇ
‚îú‚îÄ‚îÄ parse_raw_line()
‚îÇ    ‚îú‚îÄ‚îÄ extract pattern
‚îÇ    ‚îú‚îÄ‚îÄ extract expression
‚îÇ    ‚îî‚îÄ‚îÄ extract variables
‚îÇ
‚îú‚îÄ‚îÄ parse_expression()
‚îÇ    ‚îú‚îÄ‚îÄ tokenize
‚îÇ    ‚îú‚îÄ‚îÄ parse into AST
‚îÇ    ‚îî‚îÄ‚îÄ convert AST ‚Üí expression_tree
‚îÇ
‚îú‚îÄ‚îÄ build_expression_tree()
‚îÇ     (—É–∑–ª—ã integer, variable, power, product, fraction, sqrt)
‚îÇ
‚îú‚îÄ‚îÄ compute_answer()
‚îÇ     (plug variables ‚Üí evaluate tree)
‚îÇ
‚îú‚îÄ‚îÄ run_validation_rules()
‚îÇ     (–≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏)
‚îÇ
‚îî‚îÄ‚îÄ format_json()
    (–æ—Ç–≤–µ—Ç –¥–ª—è –ë–î)

üîπ 6. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ expression_tree

–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã —É–∂–µ —É—Ç–≤–µ—Ä–¥–∏–ª–∞:

–£–∑–ª—ã:
integer
variable
power
product
fraction
sqrt

–°–ø–µ—Ü–∏—Ñ–∏–∫–∞:

sqrt –∏—Å–ø–æ–ª—å–∑—É–µ—Ç radicand, –∞ –Ω–µ value

integer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ number

product –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ factors

fraction –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç numerator –∏ denominator

power –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç fields: base, exp

üîπ 7. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä—Å–µ—Ä—É

–ü–∞—Ä—Å–µ—Ä –æ–±—è–∑–∞–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å:

—Å—Ç–µ–ø–µ–Ω–∏: a^3

–±–∞—à–Ω–∏: (a^3)^5

–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è: a ¬∑ b ¬∑ c

–¥—Ä–æ–±–∏: (‚Ä¶) / (‚Ä¶)

–∫–æ—Ä–Ω–∏: ‚àö(‚Ä¶)

–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–µ–ø–µ–Ω–∏: a^-7

–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: a, b

—Å–∫–æ–±–∫–∏ –ª—é–±–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏

–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ LaTeX (^, sqrt, \frac –∑–∞–ø—Ä–µ—â–µ–Ω—ã)

üîπ 8. –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –ø—Ä–∞–≤–∏–ª –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º
‚≠ê –î–ª—è alg_power_fraction:

—Å—Ç–µ–ø–µ–Ω–∏ –≤–Ω—É—Ç—Ä–∏ power –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ü–µ–ª—ã–º–∏

–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å 0

–¥–µ—Ä–µ–≤–æ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å fraction

–≤ —á–∏—Å–ª–∏—Ç–µ–ª–µ/–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–µ –Ω–µ—Ç –∫–æ—Ä–Ω–µ–π

–¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –±–æ–ª—å—à–∏–µ —Å—Ç–µ–ø–µ–Ω–∏ –¥–æ 30

–æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ–Ω–µ—á–Ω–æ–π –¥—Ä–æ–±—å—é –∏–ª–∏ —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º

‚≠ê –î–ª—è alg_radical_power:

–≤–µ—Ä—Ö–Ω–∏–π —É–∑–µ–ª ‚Äî sqrt

radicand –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å fraction –∏–ª–∏ product

–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–¥ –∫–æ—Ä–Ω–µ–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω—ã–º –∫–≤–∞–¥—Ä–∞—Ç–æ–º

(m ‚àí n) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á—ë—Ç–Ω—ã–º

–ø–æ—Å–ª–µ —É–ø—Ä–æ—â–µ–Ω–∏—è –∫–æ—Ä–Ω—è –æ—Ü–µ–Ω–∏–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ –¥–µ—Ä–µ–≤—É

‚≠ê –î–ª—è alg_radical_fraction:

–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 1 –∏–ª–∏ 2 –∫–æ—Ä–Ω—è —Å–≤–µ—Ä—Ö—É

denominator –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å sqrt –∏–ª–∏ product –∏–∑ sqrt

–ø–æ—Å–ª–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –≤—Å–µ—Ö radicand —Å—Ç–µ–ø–µ–Ω—å –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —á—ë—Ç–Ω–∞—è

radicand –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–≤–ª–µ–∫–∞–µ–º—ã–º

–ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ü–µ–ª—ã–º –∏–ª–∏ –∫–æ–Ω–µ—á–Ω–æ–π –¥—Ä–æ–±—å—é

üîπ 9. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞

–î–µ—Ä–µ–≤–æ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ:

integer ‚Üí —á–∏—Å–ª–æ
variable ‚Üí –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
power ‚Üí eval(base)**exp
product ‚Üí –ø–µ—Ä–µ–º–Ω–æ–∂–∞–µ–º
fraction ‚Üí numerator/denominator
sqrt ‚Üí radicand ** 0.5


‚ùó–í–∞–∂–Ω–æ:
–æ—Ç–≤–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ —Å—Ç—Ä–æ–∫–µ:

–µ—Å–ª–∏ —Ü–µ–ª–æ–µ ‚Üí "80"

–µ—Å–ª–∏ –∫–æ–Ω–µ—á–Ω–∞—è –¥—Ä–æ–±—å ‚Üí "0.04"

–º–∞–∫—Å–∏–º—É–º 3 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π

–Ω–∏–∫–∞–∫–∏—Ö –æ–∫—Ä—É–≥–ª–µ–Ω–∏–π, —Ç–æ–ª—å–∫–æ —Ç–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

üîπ 10. –§–∏–Ω–∞–ª—å–Ω—ã–π JSON, –∫–æ—Ç–æ—Ä—ã–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –≤—ã–¥–∞–≤–∞—Ç—å
{
  "task_type": "8",
  "subtype": "integer_expressions",
  "solution_pattern": "...",

  "expression_tree": { ... },

  "variables": {
    "a": 10,
    "b": 15
  },

  "answer": "0.04"
}
